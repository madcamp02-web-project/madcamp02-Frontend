# âš™ï¸ MadCamp02: ë°±ì—”ë“œ ê°œë°œ ê³„íšì„œ

**Ver 1.0 - Backend Development Blueprint**

---

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#1-ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì•„í‚¤í…ì²˜ ì„¤ê³„](#2-ì•„í‚¤í…ì²˜-ì„¤ê³„)
3. [ê¸°ìˆ  ìŠ¤íƒ](#3-ê¸°ìˆ -ìŠ¤íƒ)
4. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#4-í”„ë¡œì íŠ¸-êµ¬ì¡°)
5. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#5-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
6. [API ìƒì„¸ ì„¤ê³„](#6-api-ìƒì„¸-ì„¤ê³„)
7. [ì¸ì¦ ë° ë³´ì•ˆ](#7-ì¸ì¦-ë°-ë³´ì•ˆ)
8. [ì‹¤ì‹œê°„ í†µì‹ ](#8-ì‹¤ì‹œê°„-í†µì‹ )
9. [ì™¸ë¶€ API ì—°ë™](#9-ì™¸ë¶€-api-ì—°ë™)
10. [ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§](#10-ë¹„ì¦ˆë‹ˆìŠ¤-ë¡œì§)
11. [AI ì„œë²„ ì„¤ê³„](#11-ai-ì„œë²„-ì„¤ê³„)
12. [ìºì‹± ì „ëµ](#12-ìºì‹±-ì „ëµ)
13. [í…ŒìŠ¤íŠ¸ ì „ëµ](#13-í…ŒìŠ¤íŠ¸-ì „ëµ)
14. [ë°°í¬ ë° ì¸í”„ë¼](#14-ë°°í¬-ë°-ì¸í”„ë¼)
15. [ê°œë°œ ë¡œë“œë§µ](#15-ê°œë°œ-ë¡œë“œë§µ)

---

## 1. ì‹œìŠ¤í…œ ê°œìš”

### 1.1 ë°±ì—”ë“œ ì—­í• 

MadCamp02 ë°±ì—”ë“œëŠ” ë‹¤ìŒ í•µì‹¬ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤:

1. **ì‚¬ìš©ì ê´€ë¦¬**: OAuth2 ì¸ì¦, JWT í† í°, í”„ë¡œí•„ ê´€ë¦¬
2. **ëª¨ì˜íˆ¬ì ì—”ì§„**: ë§¤ìˆ˜/ë§¤ë„ íŠ¸ëœì­ì…˜, í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬
3. **ì‹¤ì‹œê°„ ë°ì´í„°**: Finnhub WebSocket â†’ Redis â†’ í´ë¼ì´ì–¸íŠ¸ ì¤‘ê³„
4. **ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜**: ê°€ì± , ë­í‚¹, ì¸ë²¤í† ë¦¬
5. **AI ìƒë‹´**: ì‚¬ì£¼ ê¸°ë°˜ íˆ¬ì ì¡°ì–¸ (FastAPI ì—°ë™)

### 1.2 ì„œë²„ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       BACKEND SERVERS                            â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Spring Boot 3.2          â”‚   â”‚    FastAPI (Python)    â”‚  â”‚
â”‚  â”‚     (Core Server)            â”‚   â”‚    (AI Server)         â”‚  â”‚
â”‚  â”‚                              â”‚   â”‚                        â”‚  â”‚
â”‚  â”‚  â€¢ REST API                  â”‚   â”‚  â€¢ LLM Inference       â”‚  â”‚
â”‚  â”‚  â€¢ WebSocket (STOMP)         â”‚   â”‚  â€¢ Stable Diffusion    â”‚  â”‚
â”‚  â”‚  â€¢ OAuth2 + JWT              â”‚   â”‚  â€¢ SSE Streaming       â”‚  â”‚
â”‚  â”‚  â€¢ Transaction Management    â”‚   â”‚                        â”‚  â”‚
â”‚  â”‚  â€¢ Finnhub Integration       â”‚   â”‚                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                               â”‚                  â”‚
â”‚               â–¼                               â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL 16   â”‚  â”‚    Redis 7       â”‚  â”‚  Local GPU    â”‚  â”‚
â”‚  â”‚  (Main DB)       â”‚  â”‚  (Cache/Pub-Sub) â”‚  â”‚  (AI ì²˜ë¦¬)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ì•„í‚¤í…ì²˜ ì„¤ê³„

### 2.1 ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PRESENTATION LAYER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Controllers (REST API)                                     â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ AuthController                                         â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ UserController                                         â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ TradeController                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ StockController                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ GameController                                         â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ChatController                                         â”‚ â”‚
â”‚  â”‚  â””â”€â”€ NotificationController                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  WebSocket Handlers (STOMP)                                 â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ StockWebSocketHandler                                  â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ TradeWebSocketHandler                                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€ NotificationWebSocketHandler                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SERVICE LAYER                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Services (Business Logic)                                  â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ AuthService                                            â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ UserService                                            â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ TradeService                                           â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ PortfolioService                                       â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ StockService                                           â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ GachaService                                           â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ RankingService                                         â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ChatService                                            â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ NotificationService                                    â”‚ â”‚
â”‚  â”‚  â””â”€â”€ SajuService                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   INFRASTRUCTURE LAYER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Repositories     â”‚ â”‚  External APIs   â”‚ â”‚  Message Queue â”‚  â”‚
â”‚  â”‚  (JPA)            â”‚ â”‚  (Finnhub, AI)   â”‚ â”‚  (Redis)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  Cache Manager    â”‚ â”‚  WebSocket Brokerâ”‚                     â”‚
â”‚  â”‚  (Redis)          â”‚ â”‚  (STOMP)         â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ë„ë©”ì¸ ëª¨ë¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User      â”‚â”€â”€â”€â”€â–ºâ”‚   Wallet     â”‚     â”‚  Portfolio   â”‚
â”‚              â”‚     â”‚              â”‚     â”‚  (Holdings)  â”‚
â”‚ - userId     â”‚     â”‚ - cashBalanceâ”‚     â”‚ - ticker     â”‚
â”‚ - email      â”‚     â”‚ - realizedPnLâ”‚     â”‚ - quantity   â”‚
â”‚ - nickname   â”‚     â”‚ - gameCoin   â”‚     â”‚ - avgPrice   â”‚
â”‚ - birthDate  â”‚     â”‚ - totalAssetsâ”‚     â”‚              â”‚
â”‚ - sajuElementâ”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - zodiacSign â”‚            â”‚                    â”‚
â”‚ - avatarUrl  â”‚            â–¼                    â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚  TradeLogs   â”‚     â”‚  Watchlist   â”‚
       â”‚             â”‚              â”‚     â”‚              â”‚
       â”‚             â”‚ - tradeType  â”‚     â”‚ - ticker     â”‚
       â”‚             â”‚ - price      â”‚     â”‚ - addedAt    â”‚
       â”‚             â”‚ - quantity   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚ - realizedPnLâ”‚
       â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                             â”‚
       â–¼                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Inventory   â”‚â”€â”€â”€â”€â–ºâ”‚    Item      â”‚     â”‚ ChatHistory  â”‚
â”‚              â”‚     â”‚              â”‚     â”‚              â”‚
â”‚ - isEquipped â”‚     â”‚ - name       â”‚     â”‚ - sessionId  â”‚
â”‚ - acquiredAt â”‚     â”‚ - category   â”‚     â”‚ - messages   â”‚
â”‚              â”‚     â”‚ - rarity     â”‚     â”‚ - sentiment  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ - probabilityâ”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ Notification â”‚
                     â”‚              â”‚
                     â”‚ - type       â”‚
                     â”‚ - title      â”‚
                     â”‚ - isRead     â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ê¸°ìˆ  ìŠ¤íƒ

### 3.1 Core Server (Spring Boot)

| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| Java | 21 LTS | ì–¸ì–´ |
| Spring Boot | 3.2.x | í”„ë ˆì„ì›Œí¬ |
| Spring Security | 6.x | ì¸ì¦/ì¸ê°€ |
| Spring Data JPA | 3.x | ORM |
| Spring WebSocket | 6.x | ì‹¤ì‹œê°„ í†µì‹  |
| Spring Validation | 3.x | ì…ë ¥ ê²€ì¦ |
| Lombok | Latest | ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì œê±° |
| MapStruct | Latest | DTO ë§¤í•‘ |
| jjwt | 0.12.x | JWT ì²˜ë¦¬ |
| Lettuce | 6.x | Redis í´ë¼ì´ì–¸íŠ¸ |

### 3.2 AI Server (FastAPI)

| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| Python | 3.11+ | ì–¸ì–´ |
| FastAPI | 0.100+ | API í”„ë ˆì„ì›Œí¬ |
| Uvicorn | Latest | ASGI ì„œë²„ |
| PyTorch | 2.x | AI í”„ë ˆì„ì›Œí¬ |
| Transformers | Latest | LLM |
| Diffusers | Latest | Stable Diffusion |
| SSE-Starlette | Latest | SSE ìŠ¤íŠ¸ë¦¬ë° |

### 3.3 Database & Cache

| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| PostgreSQL | 16 | ë©”ì¸ DB |
| Redis | 7.x | ìºì‹œ/Pub-Sub |

### 3.4 ì™¸ë¶€ API

| API | ìš©ë„ |
|-----|------|
| Finnhub | ë¯¸êµ­ ì£¼ì‹ ì‹¤ì‹œê°„ ë°ì´í„° |
| Google OAuth2 | ì†Œì…œ ë¡œê·¸ì¸ |
| ğŸ†• Kakao OAuth2 | ì†Œì…œ ë¡œê·¸ì¸ (ì¹´ì¹´ì˜¤) |

---

## 4. í”„ë¡œì íŠ¸ êµ¬ì¡°

### 4.1 Spring Boot í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ğŸ“ madcamp02-backend/
â”œâ”€â”€ ğŸ“ src/main/java/com/madcamp02/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ config/                        # ì„¤ì • í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java           # Spring Security ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ WebSocketConfig.java          # WebSocket/STOMP ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ RedisConfig.java              # Redis ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ JpaConfig.java                # JPA ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ CorsConfig.java               # CORS ì„¤ì •
â”‚   â”‚   â””â”€â”€ SwaggerConfig.java            # API ë¬¸ì„œ ì„¤ì •
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ domain/                        # ë„ë©”ì¸ ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ ğŸ“ user/
â”‚   â”‚   â”‚   â”œâ”€â”€ User.java                 # ì‚¬ìš©ì ì—”í‹°í‹°
â”‚   â”‚   â”‚   â””â”€â”€ UserRepository.java       # ì‚¬ìš©ì ë ˆí¬ì§€í† ë¦¬
â”‚   â”‚   â”œâ”€â”€ ğŸ“ wallet/
â”‚   â”‚   â”‚   â”œâ”€â”€ Wallet.java               # ì§€ê°‘ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â””â”€â”€ WalletRepository.java
â”‚   â”‚   â”œâ”€â”€ ğŸ“ portfolio/
â”‚   â”‚   â”‚   â”œâ”€â”€ Portfolio.java            # í¬íŠ¸í´ë¦¬ì˜¤ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â””â”€â”€ PortfolioRepository.java
â”‚   â”‚   â”œâ”€â”€ ğŸ“ trade/
â”‚   â”‚   â”‚   â”œâ”€â”€ TradeLog.java             # ê±°ë˜ ê¸°ë¡ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â””â”€â”€ TradeLogRepository.java
â”‚   â”‚   â”œâ”€â”€ ğŸ“ item/
â”‚   â”‚   â”‚   â”œâ”€â”€ Item.java                 # ì•„ì´í…œ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ ItemRepository.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Inventory.java            # ì¸ë²¤í† ë¦¬ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â””â”€â”€ InventoryRepository.java
â”‚   â”‚   â”œâ”€â”€ ğŸ“ chat/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatHistory.java          # ì±„íŒ… ê¸°ë¡ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â””â”€â”€ ChatHistoryRepository.java
â”‚   â”‚   â”œâ”€â”€ ğŸ“ watchlist/
â”‚   â”‚   â”‚   â”œâ”€â”€ Watchlist.java            # ê´€ì‹¬ì¢…ëª© ì—”í‹°í‹°
â”‚   â”‚   â”‚   â””â”€â”€ WatchlistRepository.java
â”‚   â”‚   â””â”€â”€ ğŸ“ notification/
â”‚   â”‚       â”œâ”€â”€ Notification.java         # ì•Œë¦¼ ì—”í‹°í‹°
â”‚   â”‚       â””â”€â”€ NotificationRepository.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ dto/                           # Data Transfer Objects
â”‚   â”‚   â”œâ”€â”€ ğŸ“ request/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginRequest.java
â”‚   â”‚   â”‚   â”œâ”€â”€ RefreshRequest.java        # âœ… í† í° ê°±ì‹  ìš”ì²­
â”‚   â”‚   â”‚   â”œâ”€â”€ OnboardingRequest.java
â”‚   â”‚   â”‚   â”œâ”€â”€ TradeOrderRequest.java
â”‚   â”‚   â”‚   â”œâ”€â”€ GachaRequest.java
â”‚   â”‚   â”‚   â””â”€â”€ ChatRequest.java
â”‚   â”‚   â”œâ”€â”€ ğŸ“ response/
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthResponse.java
â”‚   â”‚   â”‚   â”œâ”€â”€ UserResponse.java
â”‚   â”‚   â”‚   â”œâ”€â”€ WalletResponse.java
â”‚   â”‚   â”‚   â”œâ”€â”€ PortfolioResponse.java
â”‚   â”‚   â”‚   â”œâ”€â”€ TradeResponse.java
â”‚   â”‚   â”‚   â”œâ”€â”€ StockQuoteResponse.java
â”‚   â”‚   â”‚   â”œâ”€â”€ CandleResponse.java
â”‚   â”‚   â”‚   â”œâ”€â”€ GachaResultResponse.java
â”‚   â”‚   â”‚   â”œâ”€â”€ RankingResponse.java
â”‚   â”‚   â”‚   â”œâ”€â”€ DividendResponse.java
â”‚   â”‚   â”‚   â””â”€â”€ NotificationResponse.java
â”‚   â”‚   â””â”€â”€ ğŸ“ websocket/
â”‚   â”‚       â”œâ”€â”€ StockPriceMessage.java
â”‚   â”‚       â”œâ”€â”€ TradeNotification.java
â”‚   â”‚       â””â”€â”€ RankingUpdate.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ service/                       # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ AuthService.java              # ì¸ì¦ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ UserService.java              # ì‚¬ìš©ì ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ WalletService.java            # ì§€ê°‘ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ TradeService.java             # ê±°ë˜ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ PortfolioService.java         # í¬íŠ¸í´ë¦¬ì˜¤ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ StockService.java             # ì£¼ì‹ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ GachaService.java             # ê°€ì±  ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ InventoryService.java         # ì¸ë²¤í† ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ RankingService.java           # ë­í‚¹ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ ChatService.java              # AI ìƒë‹´ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ NotificationService.java      # ì•Œë¦¼ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ SajuService.java              # ì‚¬ì£¼ ê³„ì‚° ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ DividendService.java          # ë°°ë‹¹ê¸ˆ ê³„ì‚° ì„œë¹„ìŠ¤
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ controller/                    # REST ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ AuthController.java           # /api/v1/auth/*
â”‚   â”‚   â”œâ”€â”€ UserController.java           # /api/v1/user/*
â”‚   â”‚   â”œâ”€â”€ TradeController.java          # /api/v1/trade/*
â”‚   â”‚   â”œâ”€â”€ StockController.java          # /api/v1/stock/*
â”‚   â”‚   â”œâ”€â”€ WatchlistController.java      # /api/v1/watchlist/*
â”‚   â”‚   â”œâ”€â”€ GameController.java           # /api/v1/game/*
â”‚   â”‚   â”œâ”€â”€ ChatController.java           # /api/v1/chat/*
â”‚   â”‚   â”œâ”€â”€ CalcController.java           # /api/v1/calc/*
â”‚   â”‚   â””â”€â”€ NotificationController.java   # /api/v1/notifications/*
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ websocket/                     # WebSocket í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ StockPriceHandler.java        # ì£¼ê°€ ë¸Œë¡œë“œìºìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ TradeHandler.java             # ì²´ê²° ì•Œë¦¼
â”‚   â”‚   â””â”€â”€ NotificationHandler.java      # ê°œì¸ ì•Œë¦¼
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ external/                      # ì™¸ë¶€ API ì—°ë™
â”‚   â”‚   â”œâ”€â”€ ğŸ“ finnhub/
â”‚   â”‚   â”‚   â”œâ”€â”€ FinnhubClient.java        # REST í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ FinnhubWebSocketClient.java # WebSocket í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ FinnhubProperties.java    # ì„¤ì •
â”‚   â”‚   â””â”€â”€ ğŸ“ ai/
â”‚   â”‚       â”œâ”€â”€ AIClient.java             # FastAPI ì—°ë™
â”‚   â”‚       â””â”€â”€ AIProperties.java         # ì„¤ì •
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ security/                      # ë³´ì•ˆ ê´€ë ¨
â”‚   â”‚   â”œâ”€â”€ JwtTokenProvider.java         # JWT ìƒì„±/ê²€ì¦
â”‚   â”‚   â”œâ”€â”€ JwtAuthenticationFilter.java  # JWT í•„í„°
â”‚   â”‚   â”œâ”€â”€ OAuth2SuccessHandler.java     # OAuth ì„±ê³µ í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ CustomUserDetails.java        # ì‚¬ìš©ì ìƒì„¸
â”‚   â”‚   â””â”€â”€ CustomUserDetailsService.java # ì‚¬ìš©ì ë¡œë“œ
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ exception/                     # ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â”‚   â”œâ”€â”€ GlobalExceptionHandler.java   # ì „ì—­ ì˜ˆì™¸ í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ ErrorResponse.java            # âœ… ì—ëŸ¬ ì‘ë‹µ DTO (íŒ©í† ë¦¬ ë©”ì„œë“œ í¬í•¨)
â”‚   â”‚   â”œâ”€â”€ BusinessException.java        # ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ (ë¶€ëª¨ í´ë˜ìŠ¤)
â”‚   â”‚   â”œâ”€â”€ AuthException.java            # ì¸ì¦ ì˜ˆì™¸
â”‚   â”‚   â”œâ”€â”€ TradeException.java           # ê±°ë˜ ì˜ˆì™¸
â”‚   â”‚   â”œâ”€â”€ GameException.java            # âœ… ê²Œì„/ê°€ì±  ì˜ˆì™¸
â”‚   â”‚   â”œâ”€â”€ UserException.java            # âœ… ì‚¬ìš©ì ì˜ˆì™¸
â”‚   â”‚   â””â”€â”€ ErrorCode.java                # ì—ëŸ¬ ì½”ë“œ enum
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ util/                          # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ SajuCalculator.java           # ì‚¬ì£¼ ê³„ì‚°
â”‚   â”‚   â””â”€â”€ DateUtils.java                # ë‚ ì§œ ìœ í‹¸
â”‚   â”‚
â”‚   â””â”€â”€ MadCamp02Application.java      # ë©”ì¸ í´ë˜ìŠ¤
â”‚
â”œâ”€â”€ ğŸ“ src/main/resources/
â”‚   â”œâ”€â”€ application.yml                   # ë©”ì¸ ì„¤ì •
â”‚   â”œâ”€â”€ application-dev.yml               # ê°œë°œ ì„¤ì •
â”‚   â”œâ”€â”€ application-prod.yml              # í”„ë¡œë•ì…˜ ì„¤ì •
â”‚   â””â”€â”€ ğŸ“ db/migration/                  # Flyway ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚       â”œâ”€â”€ V1__init_schema.sql
â”‚       â”œâ”€â”€ V2__add_items.sql
â”‚       â””â”€â”€ V3__add_notifications.sql
â”‚
â”œâ”€â”€ ğŸ“ src/test/java/com/madcamp02/
â”‚   â”œâ”€â”€ ğŸ“ service/
â”‚   â”‚   â”œâ”€â”€ TradeServiceTest.java
â”‚   â”‚   â”œâ”€â”€ GachaServiceTest.java
â”‚   â”‚   â””â”€â”€ SajuServiceTest.java
â”‚   â”œâ”€â”€ ğŸ“ controller/
â”‚   â”‚   â”œâ”€â”€ AuthControllerTest.java
â”‚   â”‚   â””â”€â”€ TradeControllerTest.java
â”‚   â””â”€â”€ ğŸ“ integration/
â”‚       â”œâ”€â”€ TradeIntegrationTest.java
â”‚       â””â”€â”€ WebSocketIntegrationTest.java
â”‚
â”œâ”€â”€ build.gradle                          # Gradle ë¹Œë“œ
â”œâ”€â”€ settings.gradle
â”œâ”€â”€ Dockerfile                            # Docker ì´ë¯¸ì§€ (Multi-stage, ë¹„ë£¨íŠ¸ ì‚¬ìš©ì)
â”œâ”€â”€ docker-compose.yml                    # ê°œë°œ í™˜ê²½
â””â”€â”€ .dockerignore                         # âœ… Docker ë¹Œë“œ ì œì™¸ íŒŒì¼
```

### 4.2 FastAPI í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ğŸ“ madcamp02-ai/
â”œâ”€â”€ ğŸ“ app/
â”‚   â”œâ”€â”€ main.py                           # FastAPI ì•±
â”‚   â”œâ”€â”€ ğŸ“ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ chat.py                       # /chat/* ë¼ìš°í„°
â”‚   â”‚   â””â”€â”€ avatar.py                     # /avatar/* ë¼ìš°í„°
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ llm_service.py                # LLM ì¶”ë¡ 
â”‚   â”‚   â”œâ”€â”€ avatar_service.py             # ì•„ë°”íƒ€ ìƒì„±
â”‚   â”‚   â””â”€â”€ prompt_builder.py             # í”„ë¡¬í”„íŠ¸ ìƒì„±
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ models/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ chat_request.py               # ìš”ì²­ ëª¨ë¸
â”‚   â”‚   â””â”€â”€ chat_response.py              # ì‘ë‹µ ëª¨ë¸
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ core/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ config.py                     # ì„¤ì •
â”‚       â””â”€â”€ gpu_manager.py                # GPU ê´€ë¦¬
â”‚
â”œâ”€â”€ requirements.txt                      # ì˜ì¡´ì„±
â”œâ”€â”€ Dockerfile                            # Docker ì´ë¯¸ì§€
â””â”€â”€ docker-compose.yml                    # ê°œë°œ í™˜ê²½
```

---

## 5. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 5.1 ERD

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              users                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ user_id        â”‚ BIGSERIAL                                      â”‚
â”‚    â”‚ email          â”‚ VARCHAR(255) NOT NULL UNIQUE                   â”‚
â”‚    â”‚ password       â”‚ VARCHAR(255)          # ğŸ†• ì¼ë°˜ íšŒì›ìš© (BCrypt) â”‚
â”‚    â”‚ nickname       â”‚ VARCHAR(50) NOT NULL                           â”‚
â”‚    â”‚ provider       â”‚ VARCHAR(20) DEFAULT 'LOCAL' # LOCAL/GOOGLE/KAKAOâ”‚
â”‚    â”‚ birth_date     â”‚ DATE                  # NULL í—ˆìš© (ì˜¨ë³´ë”©ì—ì„œ ì…ë ¥)â”‚
â”‚    â”‚ saju_element   â”‚ VARCHAR(10)                                    â”‚
â”‚    â”‚ zodiac_sign    â”‚ VARCHAR(20)                                    â”‚
â”‚    â”‚ avatar_url     â”‚ TEXT                                           â”‚
â”‚    â”‚ created_at     â”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            â”‚
â”‚    â”‚ updated_at     â”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:1
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              wallet                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ wallet_id      â”‚ BIGSERIAL                                      â”‚
â”‚ FK â”‚ user_id        â”‚ BIGINT NOT NULL UNIQUE â†’ users(user_id)        â”‚
â”‚    â”‚ cash_balance   â”‚ NUMERIC(19,4) DEFAULT 10000.0000               â”‚
â”‚    â”‚ realized_profitâ”‚ NUMERIC(19,4) DEFAULT 0.0000                   â”‚
â”‚    â”‚ total_assets   â”‚ NUMERIC(19,4) DEFAULT 10000.0000               â”‚
â”‚    â”‚ game_coin      â”‚ INT DEFAULT 0                                  â”‚
â”‚    â”‚ updated_at     â”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:N
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            portfolio                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ pf_id          â”‚ BIGSERIAL                                      â”‚
â”‚ FK â”‚ user_id        â”‚ BIGINT NOT NULL â†’ users(user_id)               â”‚
â”‚    â”‚ ticker         â”‚ VARCHAR(10) NOT NULL                           â”‚
â”‚    â”‚ quantity       â”‚ INT NOT NULL CHECK (quantity >= 0)             â”‚
â”‚    â”‚ avg_price      â”‚ NUMERIC(19,4) NOT NULL                         â”‚
â”‚ UQ â”‚ (user_id, ticker)                                               â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           trade_logs                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ log_id         â”‚ BIGSERIAL                                      â”‚
â”‚ FK â”‚ user_id        â”‚ BIGINT NOT NULL â†’ users(user_id)               â”‚
â”‚    â”‚ ticker         â”‚ VARCHAR(10) NOT NULL                           â”‚
â”‚    â”‚ trade_type     â”‚ VARCHAR(4) NOT NULL ('BUY' or 'SELL')          â”‚
â”‚    â”‚ price          â”‚ NUMERIC(19,4) NOT NULL                         â”‚
â”‚    â”‚ quantity       â”‚ INT NOT NULL                                   â”‚
â”‚    â”‚ total_amount   â”‚ NUMERIC(19,4) NOT NULL                         â”‚
â”‚    â”‚ fee            â”‚ NUMERIC(19,4) DEFAULT 0                        â”‚
â”‚    â”‚ realized_pnl   â”‚ NUMERIC(19,4)                                  â”‚
â”‚    â”‚ trade_date     â”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             items                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ item_id        â”‚ BIGSERIAL                                      â”‚
â”‚    â”‚ name           â”‚ VARCHAR(100) NOT NULL                          â”‚
â”‚    â”‚ description    â”‚ TEXT                                           â”‚
â”‚    â”‚ category       â”‚ VARCHAR(20) NOT NULL                           â”‚
â”‚    â”‚ rarity         â”‚ VARCHAR(20) NOT NULL                           â”‚
â”‚    â”‚ probability    â”‚ FLOAT NOT NULL                                 â”‚
â”‚    â”‚ image_url      â”‚ TEXT                                           â”‚
â”‚    â”‚ created_at     â”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           inventory                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ inv_id         â”‚ BIGSERIAL                                      â”‚
â”‚ FK â”‚ user_id        â”‚ BIGINT NOT NULL â†’ users(user_id)               â”‚
â”‚ FK â”‚ item_id        â”‚ BIGINT NOT NULL â†’ items(item_id)               â”‚
â”‚    â”‚ is_equipped    â”‚ BOOLEAN DEFAULT FALSE                          â”‚
â”‚    â”‚ acquired_at    â”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            â”‚
â”‚ UQ â”‚ (user_id, item_id)                                              â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          chat_history                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ chat_id        â”‚ BIGSERIAL                                      â”‚
â”‚ FK â”‚ user_id        â”‚ BIGINT NOT NULL â†’ users(user_id)               â”‚
â”‚    â”‚ session_id     â”‚ UUID NOT NULL                                  â”‚
â”‚    â”‚ messages       â”‚ JSONB NOT NULL                                 â”‚
â”‚    â”‚ sentiment_scoreâ”‚ FLOAT                                          â”‚
â”‚    â”‚ created_at     â”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           watchlist                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ watchlist_id   â”‚ BIGSERIAL                                      â”‚
â”‚ FK â”‚ user_id        â”‚ BIGINT NOT NULL â†’ users(user_id)               â”‚
â”‚    â”‚ ticker         â”‚ VARCHAR(10) NOT NULL                           â”‚
â”‚    â”‚ added_at       â”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            â”‚
â”‚ UQ â”‚ (user_id, ticker)                                               â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         notifications                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK â”‚ notif_id       â”‚ BIGSERIAL                                      â”‚
â”‚ FK â”‚ user_id        â”‚ BIGINT NOT NULL â†’ users(user_id)               â”‚
â”‚    â”‚ type           â”‚ VARCHAR(30) NOT NULL                           â”‚
â”‚    â”‚ title          â”‚ VARCHAR(200) NOT NULL                          â”‚
â”‚    â”‚ message        â”‚ TEXT                                           â”‚
â”‚    â”‚ is_read        â”‚ BOOLEAN DEFAULT FALSE                          â”‚
â”‚    â”‚ created_at     â”‚ TIMESTAMP DEFAULT CURRENT_TIMESTAMP            â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ì¸ë±ìŠ¤ ì „ëµ

| í…Œì´ë¸” | ì¸ë±ìŠ¤ | ìš©ë„ |
|--------|--------|------|
| users | `idx_users_email` | ë¡œê·¸ì¸ ì¡°íšŒ |
| wallet | `idx_wallet_user` | ì‚¬ìš©ìë³„ ì§€ê°‘ |
| portfolio | `idx_portfolio_user` | í¬íŠ¸í´ë¦¬ì˜¤ ì¡°íšŒ |
| portfolio | `idx_portfolio_ticker` | ì¢…ëª©ë³„ ì¡°íšŒ |
| trade_logs | `idx_trade_user` | ê±°ë˜ ë‚´ì—­ |
| trade_logs | `idx_trade_date` | ë‚ ì§œë³„ ì¡°íšŒ |
| chat_history | `idx_chat_gin` | JSONB ê²€ìƒ‰ |
| notifications | `idx_notif_unread` | ì•ˆì½ì€ ì•Œë¦¼ |

---

## 6. API ìƒì„¸ ì„¤ê³„

### 6.1 API ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ê³„

#### AuthController (`/api/v1/auth`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ DTO | ì‘ë‹µ DTO |
|--------|------|------|---------|---------|
| POST | `/signup` | ğŸ†• ì¼ë°˜ íšŒì›ê°€ì… | `SignupRequest` | `AuthResponse` |
| POST | `/login` | ğŸ†• ì¼ë°˜ ë¡œê·¸ì¸ (ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸) | `EmailLoginRequest` | `AuthResponse` |
| POST | `/oauth/google` | Google OAuth ë¡œê·¸ì¸ | `OAuthLoginRequest` | `AuthResponse` |
| POST | `/oauth/kakao` | ğŸ†• ì¹´ì¹´ì˜¤ OAuth ë¡œê·¸ì¸ | `OAuthLoginRequest` | `AuthResponse` |
| POST | `/refresh` | í† í° ê°±ì‹  | `RefreshRequest` | `AuthResponse` |
| POST | `/logout` | ë¡œê·¸ì•„ì›ƒ | - | - |
| GET | `/me` | í˜„ì¬ ì‚¬ìš©ì | - | `UserResponse` |

#### UserController (`/api/v1/user`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ DTO | ì‘ë‹µ DTO |
|--------|------|------|---------|---------|
| GET | `/me` | ë‚´ ì •ë³´ | - | `UserDetailResponse` |
| PUT | `/me` | ì •ë³´ ìˆ˜ì • | `UpdateUserRequest` | `UserResponse` |
| POST | `/onboarding` | ì˜¨ë³´ë”© | `OnboardingRequest` | `OnboardingResponse` |
| GET | `/wallet` | ì§€ê°‘ ì¡°íšŒ | - | `WalletResponse` |

#### TradeController (`/api/v1/trade`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ DTO | ì‘ë‹µ DTO |
|--------|------|------|---------|---------|
| POST | `/order` | ì£¼ë¬¸ | `TradeOrderRequest` | `TradeResponse` |
| GET | `/portfolio` | í¬íŠ¸í´ë¦¬ì˜¤ | - | `PortfolioListResponse` |
| GET | `/portfolio/{ticker}` | íŠ¹ì • ì¢…ëª© | - | `PortfolioItemResponse` |
| GET | `/history` | ê±°ë˜ ë‚´ì—­ | Query Params | `TradeHistoryResponse` |

#### StockController (`/api/v1/stock`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ DTO | ì‘ë‹µ DTO |
|--------|------|------|---------|---------|
| GET | `/quote/{ticker}` | í˜„ì¬ê°€ | - | `StockQuoteResponse` |
| GET | `/candles/{ticker}` | ìº”ë“¤ ë°ì´í„° | Query Params | `CandleResponse` |
| GET | `/search` | ì¢…ëª© ê²€ìƒ‰ | Query Params | `SearchResponse` |
| GET | `/profile/{ticker}` | ì¢…ëª© ì •ë³´ | - | `StockProfileResponse` |

#### WatchlistController (`/api/v1/watchlist`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ DTO | ì‘ë‹µ DTO |
|--------|------|------|---------|---------|
| GET | `/` | ê´€ì‹¬ì¢…ëª© ì¡°íšŒ | - | `WatchlistResponse` |
| POST | `/` | ì¶”ê°€ | `AddWatchlistRequest` | `WatchlistItemResponse` |
| DELETE | `/{ticker}` | ì‚­ì œ | - | - |

#### GameController (`/api/v1/game`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ DTO | ì‘ë‹µ DTO |
|--------|------|------|---------|---------|
| POST | `/gacha` | ê°€ì±  ë½‘ê¸° | `GachaRequest` | `GachaResultResponse` |
| GET | `/items` | ì•„ì´í…œ ëª©ë¡ | - | `ItemListResponse` |
| GET | `/inventory` | ì¸ë²¤í† ë¦¬ | - | `InventoryResponse` |
| PUT | `/equip/{itemId}` | ì¥ì°©/í•´ì œ | - | `EquipResponse` |
| GET | `/ranking` | ë­í‚¹ | Query Params | `RankingResponse` |
| POST | `/convert-profit` | ìˆ˜ìµâ†’ì½”ì¸ | `ConvertRequest` | `ConvertResponse` |

#### CalcController (`/api/v1/calc`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ DTO | ì‘ë‹µ DTO |
|--------|------|------|---------|---------|
| GET | `/dividend` | ë°°ë‹¹ê¸ˆ ê³„ì‚° | - | `DividendResponse` |
| GET | `/tax` | ì„¸ê¸ˆ ê³„ì‚° | Query Params | `TaxResponse` |

#### ChatController (`/api/v1/chat`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ DTO | ì‘ë‹µ DTO |
|--------|------|------|---------|---------|
| POST | `/ask` | AI ìƒë‹´ (SSE) | `ChatRequest` | SSE Stream |
| GET | `/history` | ëŒ€í™” ë‚´ì—­ | Query Params | `ChatHistoryResponse` |
| DELETE | `/session/{sessionId}` | ì„¸ì…˜ ì‚­ì œ | - | - |

#### NotificationController (`/api/v1/notifications`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ìš”ì²­ DTO | ì‘ë‹µ DTO |
|--------|------|------|---------|---------|
| GET | `/` | ì•Œë¦¼ ëª©ë¡ | Query Params | `NotificationListResponse` |
| PUT | `/{id}/read` | ì½ìŒ ì²˜ë¦¬ | - | - |
| PUT | `/read-all` | ì „ì²´ ì½ìŒ | - | - |

### 6.2 DTO ì„¤ê³„

#### Request DTOs

```
ğŸ“ dto/request/
â”œâ”€â”€ SignupRequest                        # ğŸ†• ì¼ë°˜ íšŒì›ê°€ì…
â”‚   â””â”€â”€ email: String, password: String, nickname: String
â”‚
â”œâ”€â”€ EmailLoginRequest                    # ğŸ†• ì¼ë°˜ ë¡œê·¸ì¸
â”‚   â””â”€â”€ email: String, password: String
â”‚
â”œâ”€â”€ OAuthLoginRequest                    # OAuth ë¡œê·¸ì¸ (Google, Kakao)
â”‚   â””â”€â”€ provider: String, idToken: String (ë˜ëŠ” authorizationCode)
â”‚
â”œâ”€â”€ RefreshRequest
â”‚   â””â”€â”€ refreshToken: String
â”‚
â”œâ”€â”€ OnboardingRequest
â”‚   â””â”€â”€ nickname: String, birthDate: LocalDate
â”‚
â”œâ”€â”€ TradeOrderRequest
â”‚   â””â”€â”€ ticker: String, type: TradeType, quantity: Integer, orderType: OrderType
â”‚
â”œâ”€â”€ GachaRequest
â”‚   â””â”€â”€ count: Integer
â”‚
â”œâ”€â”€ ChatRequest
â”‚   â””â”€â”€ message: String, sessionId: UUID, context: ChatContext
â”‚
â””â”€â”€ AddWatchlistRequest
    â””â”€â”€ ticker: String
```

#### Response DTOs

```
ğŸ“ dto/response/
â”œâ”€â”€ AuthResponse
â”‚   â””â”€â”€ accessToken, refreshToken, expiresIn, user, isNewUser
â”‚
â”œâ”€â”€ UserResponse
â”‚   â””â”€â”€ userId, email, nickname, sajuElement, zodiacSign, avatarUrl
â”‚
â”œâ”€â”€ OnboardingResponse
â”‚   â””â”€â”€ userId, nickname, birthDate, sajuElement, sajuElementKor, 
â”‚       zodiacSign, zodiacSignKor, luckyColor, luckyNumber[], wallet
â”‚
â”œâ”€â”€ WalletResponse
â”‚   â””â”€â”€ cashBalance, realizedProfit, totalAssets, gameCoin
â”‚
â”œâ”€â”€ PortfolioResponse
â”‚   â””â”€â”€ holdings[], totalValue, totalProfit, totalProfitPercent
â”‚
â”œâ”€â”€ TradeResponse
â”‚   â””â”€â”€ orderId, ticker, type, quantity, executedPrice, 
â”‚       totalAmount, fee, executedAt, portfolio, wallet
â”‚
â”œâ”€â”€ StockQuoteResponse
â”‚   â””â”€â”€ ticker, price, change, changePercent, volume, timestamp
â”‚
â”œâ”€â”€ CandleResponse
â”‚   â””â”€â”€ ticker, candles[{time, open, high, low, close, volume}]
â”‚
â”œâ”€â”€ GachaResultResponse
â”‚   â””â”€â”€ results[{itemId, name, category, rarity, imageUrl, isNew}], wallet
â”‚
â”œâ”€â”€ RankingResponse
â”‚   â””â”€â”€ rankings[{rank, userId, nickname, avatarUrl, profitPercent, items[]}], 
â”‚       totalParticipants
â”‚
â”œâ”€â”€ DividendResponse
â”‚   â””â”€â”€ portfolio[{ticker, quantity, dividendPerShare, annualDividend, 
â”‚                   dividendYield, exDividendDate}],
â”‚       summary{totalAnnualDividend, withholdingTax, netDividend, avgYield}
â”‚
â””â”€â”€ NotificationResponse
    â””â”€â”€ notifications[{id, type, title, message, isRead, createdAt}], unreadCount
```

---

## 7. ì¸ì¦ ë° ë³´ì•ˆ

### 7.1 ì¸ì¦ ë°©ì‹ (3ê°€ì§€)

| ë°©ì‹ | provider | ì„¤ëª… |
|------|----------|------|
| ğŸ†• ì¼ë°˜ íšŒì›ê°€ì…/ë¡œê·¸ì¸ | `LOCAL` | ì´ë©”ì¼ + ë¹„ë°€ë²ˆí˜¸ (BCrypt ì•”í˜¸í™”) |
| Google OAuth | `GOOGLE` | Google ID Token ê²€ì¦ |
| ğŸ†• Kakao OAuth | `KAKAO` | Kakao Access Token / Authorization Code |

### 7.2 ì¼ë°˜ íšŒì›ê°€ì…/ë¡œê·¸ì¸ íë¦„ ğŸ†•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client  â”‚                          â”‚ Backend â”‚         â”‚   DB    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                                    â”‚                   â”‚
     â”‚ â”€â”€â”€â”€â”€â”€ íšŒì›ê°€ì… (/auth/signup) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â”‚                                    â”‚                   â”‚
     â”‚  POST /auth/signup                 â”‚                   â”‚
     â”‚  {email, password, nickname}       â”‚                   â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                   â”‚
     â”‚                                    â”‚                   â”‚
     â”‚                                    â”‚ ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬   â”‚
     â”‚                                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                                    â”‚                   â”‚
     â”‚                                    â”‚ BCrypt ì•”í˜¸í™”     â”‚
     â”‚                                    â”‚ User + Wallet ìƒì„± â”‚
     â”‚                                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                                    â”‚                   â”‚
     â”‚      AuthResponse (JWT ë°œê¸‰)       â”‚                   â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
     â”‚                                    â”‚                   â”‚
     â”‚ â”€â”€â”€â”€â”€â”€ ë¡œê·¸ì¸ (/auth/login) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â”‚                                    â”‚                   â”‚
     â”‚  POST /auth/login                  â”‚                   â”‚
     â”‚  {email, password}                 â”‚                   â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                   â”‚
     â”‚                                    â”‚                   â”‚
     â”‚                                    â”‚ ì‚¬ìš©ì ì¡°íšŒ       â”‚
     â”‚                                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                                    â”‚                   â”‚
     â”‚                                    â”‚ BCrypt ë¹„êµ       â”‚
     â”‚                                    â”‚                   â”‚
     â”‚      AuthResponse (JWT ë°œê¸‰)       â”‚                   â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
```

### 7.3 OAuth ë¡œê·¸ì¸ íë¦„ (Google / Kakao)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client  â”‚    â”‚ Google/Kakao   â”‚    â”‚ Backend â”‚         â”‚   DB    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                 â”‚                   â”‚                   â”‚
     â”‚  OAuth ë¡œê·¸ì¸   â”‚                   â”‚                   â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                   â”‚                   â”‚
     â”‚                 â”‚                   â”‚                   â”‚
     â”‚  ID/Access Tokenâ”‚                   â”‚                   â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚                   â”‚
     â”‚                 â”‚                   â”‚                   â”‚
     â”‚   POST /auth/oauth/google (ë˜ëŠ” /kakao)                 â”‚
     â”‚   {provider, idToken}               â”‚                   â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                   â”‚
     â”‚                 â”‚                   â”‚                   â”‚
     â”‚                 â”‚                   â”‚ Token ê²€ì¦       â”‚
     â”‚                 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
     â”‚                 â”‚   ì´ë©”ì¼ ì •ë³´     â”‚                   â”‚
     â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                   â”‚
     â”‚                 â”‚                   â”‚                   â”‚
     â”‚                 â”‚                   â”‚ Find/Create User  â”‚
     â”‚                 â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                 â”‚                   â”‚                   â”‚
     â”‚     AuthResponse (JWT ë°œê¸‰)         â”‚                   â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
```

### 7.4 JWT êµ¬ì¡°

```java
// Access Token Payload
{
  "sub": "1",                    // userId
  "email": "user@gmail.com",
  "nickname": "íˆ¬ìë„ì‚¬",
  "role": "USER",
  "iat": 1705392000,             // issued at
  "exp": 1705395600              // expires (1h)
}

// Refresh Token Payload
{
  "sub": "1",
  "type": "REFRESH",
  "iat": 1705392000,
  "exp": 1705996800              // expires (7d)
}
```

### 7.5 Security Config

```
SecurityFilterChain ì„¤ì •:
â”œâ”€â”€ CSRF ë¹„í™œì„±í™” (REST API)
â”œâ”€â”€ ì„¸ì…˜ Stateless
â”œâ”€â”€ CORS ì„¤ì •
â”œâ”€â”€ ê³µê°œ ì—”ë“œí¬ì¸íŠ¸:
â”‚   â”œâ”€â”€ /auth/signup         # ğŸ†• íšŒì›ê°€ì…
â”‚   â”œâ”€â”€ /auth/login          # ğŸ†• ì¼ë°˜ ë¡œê·¸ì¸
â”‚   â”œâ”€â”€ /auth/oauth/google   # Google ë¡œê·¸ì¸
â”‚   â”œâ”€â”€ /auth/oauth/kakao    # ğŸ†• Kakao ë¡œê·¸ì¸
â”‚   â””â”€â”€ /auth/refresh        # í† í° ê°±ì‹ 
â”œâ”€â”€ ë³´í˜¸ ì—”ë“œí¬ì¸íŠ¸: ë‚˜ë¨¸ì§€ ì „ì²´
â””â”€â”€ JWT í•„í„° ì¶”ê°€
```

### 7.6 ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

| í•­ëª© | êµ¬í˜„ ë°©ë²• |
|------|----------|
| SQL Injection | JPA Prepared Statement |
| XSS | CSP í—¤ë”, ì…ë ¥ ê²€ì¦ |
| CSRF | Stateless (ë¹„í™œì„±í™”) |
| Rate Limiting | Bucket4j ë˜ëŠ” Nginx |
| HTTPS | TLS 1.3 ê°•ì œ |
| Password | ğŸ†• BCrypt ì•”í˜¸í™” (ì¼ë°˜ íšŒì›), OAuthëŠ” ì €ì¥ ì—†ìŒ |

---

## 8. ì‹¤ì‹œê°„ í†µì‹ 

### 8.1 WebSocket ì„¤ì •

```
WebSocketConfig:
â”œâ”€â”€ STOMP ì—”ë“œí¬ì¸íŠ¸: /ws
â”œâ”€â”€ SockJS í´ë°± í™œì„±í™”
â”œâ”€â”€ Message Broker:
â”‚   â”œâ”€â”€ /topic/* (ë¸Œë¡œë“œìºìŠ¤íŠ¸)
â”‚   â””â”€â”€ /user/queue/* (ê°œì¸)
â””â”€â”€ Application Destination Prefix: /app
```

### 8.2 ì±„ë„ ì„¤ê³„

| ì±„ë„ | íƒ€ì… | ì„¤ëª… | ë©”ì‹œì§€ í˜•ì‹ |
|------|------|------|------------|
| `/topic/stock.{ticker}` | Broadcast | ì¢…ëª©ë³„ ì‹¤ì‹œê°„ ì‹œì„¸ | `StockPriceMessage` |
| `/user/queue/trade` | User-specific | ì²´ê²° ì•Œë¦¼ | `TradeNotification` |
| `/user/queue/notification` | User-specific | ê°œì¸ ì•Œë¦¼ | `NotificationMessage` |
| `/topic/ranking` | Broadcast | ë­í‚¹ ë³€ë™ | `RankingUpdate` |

### 8.3 Finnhub ì—°ë™

```
Finnhub WebSocket Client:
â”œâ”€â”€ ì—°ê²°: wss://ws.finnhub.io
â”œâ”€â”€ êµ¬ë…: {"type":"subscribe","symbol":"AAPL"}
â”œâ”€â”€ ìˆ˜ì‹ : {"data":[{"s":"AAPL","p":198.45,"v":100}],"type":"trade"}
â”œâ”€â”€ ì²˜ë¦¬:
â”‚   â”œâ”€â”€ Redis ìºì‹œ ì—…ë°ì´íŠ¸
â”‚   â””â”€â”€ STOMP ë¸Œë¡œì»¤ë¡œ ì „ë‹¬
â””â”€â”€ ì¬ì—°ê²°: ìë™ ì¬ì—°ê²° ë¡œì§
```

### 8.4 ë©”ì‹œì§€ íë¦„

```
[Finnhub] â”€â”€â”€ WebSocket â”€â”€â”€â–¶ [FinnhubWebSocketClient]
                                      â”‚
                                      â”œâ”€â”€â–¶ [Redis Cache] stock:{ticker}:price
                                      â”‚
                                      â””â”€â”€â–¶ [Redis Pub/Sub] channel: stock.update
                                                  â”‚
                                                  â–¼
                                      [StockPriceHandler]
                                                  â”‚
                                                  â–¼
                                      [STOMP Broker] /topic/stock.{ticker}
                                                  â”‚
                                                  â–¼
                                      [Subscribed Clients]
```

---

## 9. ì™¸ë¶€ API ì—°ë™

### 9.1 Finnhub API

#### REST API ì‚¬ìš©

| ì—”ë“œí¬ì¸íŠ¸ | ìš©ë„ |
|-----------|------|
| `GET /quote` | í˜„ì¬ê°€ ì¡°íšŒ |
| `GET /stock/candle` | ìº”ë“¤ ë°ì´í„° |
| `GET /search` | ì¢…ëª© ê²€ìƒ‰ |
| `GET /stock/profile2` | íšŒì‚¬ ì •ë³´ |
| `GET /stock/metric` | ì¬ë¬´ ì§€í‘œ |

#### WebSocket ì‚¬ìš©

```
êµ¬ë…: {"type":"subscribe","symbol":"AAPL"}
ìˆ˜ì‹ : {"data":[{"s":"AAPL","p":198.45,"t":1705392000000,"v":100}],"type":"trade"}
í•´ì œ: {"type":"unsubscribe","symbol":"AAPL"}
```

### 9.2 AI Server (FastAPI) ì—°ë™

#### ì—”ë“œí¬ì¸íŠ¸

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| POST | `/chat/ask` | AI ìƒë‹´ (SSE) |
| POST | `/avatar/generate` | ì•„ë°”íƒ€ ìƒì„± |

#### ìš”ì²­ í˜•ì‹

```json
// POST /chat/ask
{
  "message": "í…ŒìŠ¬ë¼ ì§€ê¸ˆ ì‚¬ë„ ë ê¹Œ?",
  "userContext": {
    "sajuElement": "FIRE",
    "zodiacSign": "DRAGON",
    "portfolio": [
      {"ticker": "AAPL", "profitPercent": 5.2}
    ]
  },
  "stockContext": {
    "ticker": "TSLA",
    "price": 282.08,
    "change": -2.92,
    "rsi": 45.3,
    "per": 78.5
  }
}
```

---

## 10. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

### 10.1 ë§¤ìˆ˜ íŠ¸ëœì­ì…˜

```
TradeService.buy():
1. @Transactional ì‹œì‘
2. Redisì—ì„œ í˜„ì¬ê°€ ì¡°íšŒ
3. wallet SELECT FOR UPDATE (Row Lock)
4. ì”ê³  í™•ì¸: cashBalance >= price * quantity
5. wallet.cashBalance ì°¨ê°
6. portfolio UPSERT:
   - ê¸°ì¡´ ë³´ìœ  ì‹œ: ìˆ˜ëŸ‰ í•©ì‚°, í‰ë‹¨ê°€ ì¬ê³„ì‚°
   - ì‹ ê·œ ë³´ìœ  ì‹œ: INSERT
7. trade_logs INSERT
8. wallet.totalAssets ì¬ê³„ì‚°
9. COMMIT
10. WebSocketìœ¼ë¡œ ì²´ê²° ì•Œë¦¼ ì „ì†¡
11. ì•Œë¦¼ ì €ì¥
```

### 10.2 ë§¤ë„ íŠ¸ëœì­ì…˜

```
TradeService.sell():
1. @Transactional ì‹œì‘
2. Redisì—ì„œ í˜„ì¬ê°€ ì¡°íšŒ
3. portfolio SELECT FOR UPDATE
4. ë³´ìœ  ìˆ˜ëŸ‰ í™•ì¸: quantity >= ìš”ì²­ ìˆ˜ëŸ‰
5. ì‹¤í˜„ ì†ìµ ê³„ì‚°: (í˜„ì¬ê°€ - í‰ë‹¨ê°€) * ìˆ˜ëŸ‰
6. portfolio ìˆ˜ëŸ‰ ì°¨ê° (0ì´ë©´ DELETE)
7. wallet.cashBalance ì¦ê°€
8. wallet.realizedProfit ì¦ê°€ (ì–‘ìˆ˜ì¸ ê²½ìš°)
9. trade_logs INSERT (realized_pnl í¬í•¨)
10. wallet.totalAssets ì¬ê³„ì‚°
11. COMMIT
12. WebSocketìœ¼ë¡œ ì²´ê²° ì•Œë¦¼ ì „ì†¡
13. ì•Œë¦¼ ì €ì¥
```

### 10.3 ê°€ì±  ë¡œì§

```
GachaService.spin():
1. wallet ì¡°íšŒ ë° ì½”ì¸ í™•ì¸
2. í™•ë¥  ê¸°ë°˜ ì•„ì´í…œ ì„ íƒ:
   - Random 0~1 ìƒì„±
   - ëˆ„ì  í™•ë¥ ë¡œ ë“±ê¸‰ ê²°ì •
   - í•´ë‹¹ ë“±ê¸‰ ë‚´ ëœë¤ ì•„ì´í…œ ì„ íƒ
3. wallet.gameCoin ì°¨ê°
4. inventoryì— ì•„ì´í…œ ì¶”ê°€ (ì¤‘ë³µ ì‹œ ë¬´ì‹œ)
5. ê²°ê³¼ ë°˜í™˜
```

### 10.4 ì‚¬ì£¼ ê³„ì‚°

```
SajuService.calculate():
1. ìƒë…„ì›”ì¼ì—ì„œ ì—°ë„ ì¶”ì¶œ
2. ì˜¤í–‰ ê³„ì‚°:
   - ëìë¦¬ 4,5 â†’ ëª©(Wood)
   - ëìë¦¬ 6,7 â†’ í™”(Fire)
   - ëìë¦¬ 8,9 â†’ í† (Earth)
   - ëìë¦¬ 0,1 â†’ ê¸ˆ(Gold)
   - ëìë¦¬ 2,3 â†’ ìˆ˜(Water)
3. ë  ê³„ì‚°:
   - (ì—°ë„ - 4) % 12 â†’ 12ê°„ì§€
4. í–‰ìš´ì˜ ìƒ‰/ìˆ«ì ë§¤í•‘
5. ìƒìƒ/ìƒê·¹ ì›ì†Œ ê³„ì‚°
```

### 10.5 ë°°ë‹¹ê¸ˆ ê³„ì‚°

```
DividendService.calculate():
1. í¬íŠ¸í´ë¦¬ì˜¤ ì¡°íšŒ
2. ê° ì¢…ëª©ì— ëŒ€í•´:
   - Finnhubì—ì„œ ë°°ë‹¹ ì •ë³´ ì¡°íšŒ
   - ì—°ê°„ ë°°ë‹¹ê¸ˆ = ìˆ˜ëŸ‰ Ã— ì£¼ë‹¹ ë°°ë‹¹ê¸ˆ
   - ë°°ë‹¹ ìˆ˜ìµë¥  = ë°°ë‹¹ê¸ˆ / í˜„ì¬ í‰ê°€ì•¡
3. í•©ê³„:
   - ì´ ì—°ê°„ ë°°ë‹¹ê¸ˆ
   - ì›ì²œì§•ìˆ˜ì„¸ (15%)
   - ì‹¤ìˆ˜ë ¹ì•¡
   - í‰ê·  ìˆ˜ìµë¥ 
```

### 10.6 ë­í‚¹ ê³„ì‚°

```
RankingService.getRanking():
1. ëª¨ë“  ì‚¬ìš©ìì˜ wallet ì¡°íšŒ
2. ì´ ìˆ˜ìµë¥  ê³„ì‚°:
   - (total_assets - ì´ˆê¸°ìê¸ˆ) / ì´ˆê¸°ìê¸ˆ Ã— 100
3. ìˆ˜ìµë¥  ê¸°ì¤€ ì •ë ¬
4. ìˆœìœ„ ë¶€ì—¬
5. Redis ìºì‹œ ì €ì¥ (TTL: 1ë¶„)
6. ìƒìœ„ Nëª… ë°˜í™˜
```

---

## 11. AI ì„œë²„ ì„¤ê³„

### 11.1 FastAPI êµ¬ì¡°

```
main.py:
â”œâ”€â”€ CORS ì„¤ì •
â”œâ”€â”€ ë¼ìš°í„° ë“±ë¡
â””â”€â”€ GPU ì´ˆê¸°í™”

api/chat.py:
â”œâ”€â”€ POST /chat/ask (SSE)
â”‚   â”œâ”€â”€ ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ íŒŒì‹±
â”‚   â”œâ”€â”€ í”„ë¡¬í”„íŠ¸ ìƒì„±
â”‚   â”œâ”€â”€ LLM ì¶”ë¡  (ìŠ¤íŠ¸ë¦¬ë°)
â”‚   â””â”€â”€ SSE ì‘ë‹µ
â””â”€â”€ POST /chat/analyze
    â””â”€â”€ ê°ì • ë¶„ì„

api/avatar.py:
â””â”€â”€ POST /avatar/generate
    â”œâ”€â”€ í”„ë¡¬í”„íŠ¸ ìƒì„±
    â”œâ”€â”€ Stable Diffusion ì¶”ë¡ 
    â””â”€â”€ ì´ë¯¸ì§€ ë°˜í™˜
```

### 11.2 System Prompt

```
ë‹¹ì‹ ì€ 50ë…„ ê²½ë ¥ì˜ ì›”ìŠ¤íŠ¸ë¦¬íŠ¸ íŠ¸ë ˆì´ë”ì´ì ë™ì–‘ ì² í•™ì "ì£¼ì‹ ë„ì‚¬"ì…ë‹ˆë‹¤.

ì‚¬ìš©ì ì •ë³´:
- ì‚¬ì£¼ ì˜¤í–‰: {saju_element}
- ë : {zodiac_sign}
- ë³´ìœ  ì¢…ëª©: {portfolio}
- ê´€ì‹¬ ì¢…ëª©: {interested_ticker}

ê·œì¹™:
1. ë°˜ë“œì‹œ ì‚¬ì£¼ì™€ ì˜¤í–‰ì„ íˆ¬ì ì¡°ì–¸ì— ì—°ê²°í•˜ì„¸ìš”.
2. ì‹ ë¹„ë¡­ê³  ì€ìœ ì ì¸ ë§íˆ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš” ("í—ˆí—ˆ", "ìë„¤", "~í•˜ê² êµ¬ë¨¼").
3. ì‹¤ì œ ì¬ë¬´ ë°ì´í„°(PER, PBR, RSI ë“±)ë¥¼ ì–¸ê¸‰í•˜ì„¸ìš”.
4. íˆ¬ìëŠ” ë³¸ì¸ ì±…ì„ì´ë¼ëŠ” ë©´ì±… ì¡°í•­ì„ ì•”ì‹œí•˜ì„¸ìš”.
5. ë‹µë³€ì€ 300ì ë‚´ì™¸ë¡œ ê°„ê²°í•˜ê²Œ í•˜ì„¸ìš”.
```

### 11.3 GPU ê´€ë¦¬

```
GPU Manager:
â”œâ”€â”€ ëª¨ë¸ ë¡œë”© (ì•± ì‹œì‘ ì‹œ)
â”‚   â”œâ”€â”€ LLM ëª¨ë¸
â”‚   â””â”€â”€ Stable Diffusion ëª¨ë¸
â”œâ”€â”€ ì¶”ë¡  í ê´€ë¦¬
â”‚   â””â”€â”€ ë™ì‹œ ìš”ì²­ ì œí•œ
â”œâ”€â”€ ë©”ëª¨ë¦¬ ê´€ë¦¬
â”‚   â””â”€â”€ ëª¨ë¸ ì–¸ë¡œë“œ/ë¡œë“œ
â””â”€â”€ í—¬ìŠ¤ ì²´í¬
```

---

## 12. ìºì‹± ì „ëµ

### 12.1 Redis í‚¤ êµ¬ì¡°

```
# ì‹¤ì‹œê°„ ì£¼ê°€
stock:{ticker}:price          â†’ "198.45" (String, TTL: 5s)
stock:{ticker}:quote          â†’ {price, change, volume} (Hash, TTL: 5s)

# ì‚¬ìš©ì ì„¸ì…˜
session:{userId}              â†’ JWT Refresh Token (String, TTL: 7d)

# ë­í‚¹
ranking:monthly               â†’ [{userId, profit}...] (Sorted Set)
ranking:weekly                â†’ [{userId, profit}...] (Sorted Set)
ranking:cache                 â†’ JSON (String, TTL: 1m)

# ê²€ìƒ‰ ìºì‹œ
search:{query}                â†’ [results] (String, TTL: 10m)

# Rate Limiting
ratelimit:{ip}                â†’ count (String, TTL: 1m)
```

### 12.2 ìºì‹± ëŒ€ìƒ

| ëŒ€ìƒ | ìºì‹œ ì „ëµ | TTL |
|------|----------|-----|
| ì‹¤ì‹œê°„ ì£¼ê°€ | Write-through | 5ì´ˆ |
| ë­í‚¹ | Read-through | 1ë¶„ |
| ì¢…ëª© ê²€ìƒ‰ | Read-through | 10ë¶„ |
| íšŒì‚¬ ì •ë³´ | Read-through | 1ì‹œê°„ |
| ë°°ë‹¹ ì •ë³´ | Read-through | 24ì‹œê°„ |

### 12.3 ìºì‹œ ë¬´íš¨í™”

```
íŒ¨í„´:
1. ê±°ë˜ ì²´ê²° ì‹œ â†’ ë­í‚¹ ìºì‹œ ë¬´íš¨í™”
2. ê°€ì±  ê²°ê³¼ ì‹œ â†’ ì¸ë²¤í† ë¦¬ ìºì‹œ ë¬´íš¨í™”
3. ì£¼ê°€ ì—…ë°ì´íŠ¸ ì‹œ â†’ í•´ë‹¹ ì¢…ëª© ìºì‹œ ê°±ì‹ 
```

---

## 13. í…ŒìŠ¤íŠ¸ ì „ëµ

### 13.1 í…ŒìŠ¤íŠ¸ ë ˆë²¨

| ë ˆë²¨ | ë„êµ¬ | ì»¤ë²„ë¦¬ì§€ ëª©í‘œ |
|------|------|-------------|
| ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ | JUnit 5, Mockito | 80% |
| í†µí•© í…ŒìŠ¤íŠ¸ | Spring Test, Testcontainers | 60% |
| E2E í…ŒìŠ¤íŠ¸ | RestAssured | í•µì‹¬ ì‹œë‚˜ë¦¬ì˜¤ |
| ë¶€í•˜ í…ŒìŠ¤íŠ¸ | k6, Gatling | 1000 ë™ì‹œ ì‚¬ìš©ì |

### 13.2 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```
TradeServiceTest:
â”œâ”€â”€ ë§¤ìˆ˜ ì„±ê³µ
â”œâ”€â”€ ë§¤ìˆ˜ ì‹¤íŒ¨ (ì”ê³  ë¶€ì¡±)
â”œâ”€â”€ ë§¤ë„ ì„±ê³µ
â”œâ”€â”€ ë§¤ë„ ì‹¤íŒ¨ (ìˆ˜ëŸ‰ ë¶€ì¡±)
â”œâ”€â”€ í‰ë‹¨ê°€ ê³„ì‚° ì •í™•ì„±
â””â”€â”€ ì‹¤í˜„ ì†ìµ ê³„ì‚° ì •í™•ì„±

GachaServiceTest:
â”œâ”€â”€ í™•ë¥  ë¶„í¬ ê²€ì¦
â”œâ”€â”€ ì½”ì¸ ì°¨ê° ì •í™•ì„±
â”œâ”€â”€ ì¤‘ë³µ ì•„ì´í…œ ì²˜ë¦¬
â””â”€â”€ ì½”ì¸ ë¶€ì¡± ì‹œ ì˜ˆì™¸

SajuServiceTest:
â”œâ”€â”€ ê° ì—°ë„ë³„ ì˜¤í–‰ ê³„ì‚°
â”œâ”€â”€ ë  ê³„ì‚°
â””â”€â”€ í–‰ìš´ ì •ë³´ ë§¤í•‘
```

#### í†µí•© í…ŒìŠ¤íŠ¸

```
TradeIntegrationTest:
â”œâ”€â”€ ë§¤ìˆ˜ â†’ í¬íŠ¸í´ë¦¬ì˜¤ í™•ì¸ â†’ ë§¤ë„ â†’ ì‹¤í˜„ ì†ìµ í™•ì¸
â”œâ”€â”€ ë™ì‹œ ë§¤ìˆ˜ ìš”ì²­ (ë™ì‹œì„±)
â””â”€â”€ íŠ¸ëœì­ì…˜ ë¡¤ë°± í™•ì¸

WebSocketIntegrationTest:
â”œâ”€â”€ ì—°ê²° â†’ êµ¬ë… â†’ ë©”ì‹œì§€ ìˆ˜ì‹ 
â”œâ”€â”€ ì¸ì¦ ì—†ì´ ì—°ê²° ì‹œë„
â””â”€â”€ ì¬ì—°ê²° ë¡œì§
```

### 13.3 í…ŒìŠ¤íŠ¸ ë°ì´í„°

```
@TestConfiguration:
â”œâ”€â”€ í…ŒìŠ¤íŠ¸ìš© H2 ë°ì´í„°ë² ì´ìŠ¤
â”œâ”€â”€ í…ŒìŠ¤íŠ¸ìš© Redis (Embedded)
â”œâ”€â”€ Mock Finnhub ì„œë²„
â””â”€â”€ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì/ë°ì´í„° Fixture
```

---

## 14. ë°°í¬ ë° ì¸í”„ë¼

### 14.1 Docker Compose

```yaml
services:
  postgres:
    image: postgres:16
    environment:
      POSTGRES_DB: madcamp02-backend
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  backend:
    build: ./madcamp02-backend
    environment:
      SPRING_PROFILES_ACTIVE: prod
      DB_URL: jdbc:postgresql://postgres:5432/madcamp02-backend
      REDIS_HOST: redis
    ports:
      - "8080:8080"
    depends_on:
      - postgres
      - redis

  ai-server:
    build: ./madcamp02-ai
    runtime: nvidia
    environment:
      CUDA_VISIBLE_DEVICES: "0"
    ports:
      - "8000:8000"

  nginx:
    image: nginx:alpine
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    ports:
      - "80:80"
      - "443:443"
    depends_on:
      - backend
      - ai-server
```

### 14.2 í™˜ê²½ ë³€ìˆ˜

```yaml
# application.yml
spring:
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/madcamp02-backend}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:password}
  
  redis:
    host: ${REDIS_HOST:localhost}
    port: ${REDIS_PORT:6379}

finnhub:
  api-key: ${FINNHUB_API_KEY}
  websocket-url: wss://ws.finnhub.io

jwt:
  secret: ${JWT_SECRET}
  access-expiration: 3600000    # 1ì‹œê°„
  refresh-expiration: 604800000 # 7ì¼

ai:
  server-url: ${AI_SERVER_URL:http://localhost:8000}
```

### 14.3 CI/CD íŒŒì´í”„ë¼ì¸

```
GitHub Actions:
â”œâ”€â”€ PR ìƒì„± ì‹œ
â”‚   â”œâ”€â”€ ì½”ë“œ ë¦°íŠ¸
â”‚   â”œâ”€â”€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ í†µí•© í…ŒìŠ¤íŠ¸
â”‚
â”œâ”€â”€ main ë¸Œëœì¹˜ ë³‘í•© ì‹œ
â”‚   â”œâ”€â”€ Docker ì´ë¯¸ì§€ ë¹Œë“œ
â”‚   â”œâ”€â”€ ECR í‘¸ì‹œ
â”‚   â””â”€â”€ ECS ë°°í¬
â”‚
â””â”€â”€ íƒœê·¸ ìƒì„± ì‹œ (ë¦´ë¦¬ìŠ¤)
    â”œâ”€â”€ í”„ë¡œë•ì…˜ ë°°í¬
    â””â”€â”€ ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ ìƒì„±
```

### 14.4 ëª¨ë‹ˆí„°ë§

| ë„êµ¬ | ìš©ë„ |
|------|------|
| Prometheus | ë©”íŠ¸ë¦­ ìˆ˜ì§‘ |
| Grafana | ëŒ€ì‹œë³´ë“œ |
| ELK Stack | ë¡œê·¸ ë¶„ì„ |
| Sentry | ì—ëŸ¬ íŠ¸ë˜í‚¹ |
| PagerDuty | ì•Œë¦¼ |

---

## 15. ê°œë°œ ë¡œë“œë§µ

### Phase 1: í”„ë¡œì íŠ¸ ì…‹ì—… (Week 1)

| íƒœìŠ¤í¬ | íŒŒì¼/ëª¨ë“ˆ | ì„¤ëª… |
|--------|---------|------|
| í”„ë¡œì íŠ¸ ìƒì„± | Spring Initializr | ì˜ì¡´ì„± ì„¤ì • |
| Docker í™˜ê²½ | `docker-compose.yml` | Postgres, Redis |
| DB ìŠ¤í‚¤ë§ˆ | `V1__init.sql` | í…Œì´ë¸” ìƒì„± |
| Entity ì •ì˜ | `domain/*.java` | JPA ì—”í‹°í‹° |
| Repository ìƒì„± | `*Repository.java` | ë°ì´í„° ì ‘ê·¼ |

### Phase 2: ì¸ì¦ ì‹œìŠ¤í…œ (Week 1)

| íƒœìŠ¤í¬ | íŒŒì¼/ëª¨ë“ˆ | ì„¤ëª… |
|--------|---------|------|
| Security ì„¤ì • | `SecurityConfig.java` | JWT ì„¤ì • |
| JWT Provider | `JwtTokenProvider.java` | í† í° ìƒì„±/ê²€ì¦ |
| Auth Controller | `AuthController.java` | ë¡œê·¸ì¸ API |
| OAuth2 ì—°ë™ | `OAuth2SuccessHandler.java` | Google ì—°ë™ |
| ì˜¨ë³´ë”© API | `UserController.java` | ì‚¬ì£¼ ê³„ì‚° |

### Phase 3: ê±°ë˜ ì‹œìŠ¤í…œ (Week 2)

| íƒœìŠ¤í¬ | íŒŒì¼/ëª¨ë“ˆ | ì„¤ëª… |
|--------|---------|------|
| Trade Service | `TradeService.java` | ë§¤ìˆ˜/ë§¤ë„ ë¡œì§ |
| Portfolio Service | `PortfolioService.java` | í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ |
| Trade Controller | `TradeController.java` | ê±°ë˜ API |
| íŠ¸ëœì­ì…˜ í…ŒìŠ¤íŠ¸ | `TradeServiceTest.java` | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ |

### Phase 4: ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ (Week 2)

| íƒœìŠ¤í¬ | íŒŒì¼/ëª¨ë“ˆ | ì„¤ëª… |
|--------|---------|------|
| WebSocket ì„¤ì • | `WebSocketConfig.java` | STOMP ì„¤ì • |
| Finnhub Client | `FinnhubWebSocketClient.java` | ì‹œì„¸ ìˆ˜ì‹  |
| Stock Handler | `StockPriceHandler.java` | ë¸Œë¡œë“œìºìŠ¤íŠ¸ |
| Redis Pub/Sub | `RedisConfig.java` | ìºì‹œ/ë©”ì‹œì§€ |

### Phase 5: ì£¼ì‹ API (Week 3)

| íƒœìŠ¤í¬ | íŒŒì¼/ëª¨ë“ˆ | ì„¤ëª… |
|--------|---------|------|
| Stock Service | `StockService.java` | ì‹œì„¸/ìº”ë“¤ ì¡°íšŒ |
| Finnhub REST | `FinnhubClient.java` | REST API ì—°ë™ |
| Stock Controller | `StockController.java` | ì£¼ì‹ API |
| Watchlist | `WatchlistController.java` | ê´€ì‹¬ì¢…ëª© |

### Phase 6: ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ (Week 3-4)

| íƒœìŠ¤í¬ | íŒŒì¼/ëª¨ë“ˆ | ì„¤ëª… |
|--------|---------|------|
| Gacha Service | `GachaService.java` | ê°€ì±  ë¡œì§ |
| Inventory Service | `InventoryService.java` | ì¸ë²¤í† ë¦¬ ê´€ë¦¬ |
| Ranking Service | `RankingService.java` | ë­í‚¹ ê³„ì‚° |
| Game Controller | `GameController.java` | ê²Œì„ API |
| ì•„ì´í…œ ë°ì´í„° | `V2__add_items.sql` | ì´ˆê¸° ë°ì´í„° |

### Phase 7: AI ì„œë²„ (Week 4)

| íƒœìŠ¤í¬ | íŒŒì¼/ëª¨ë“ˆ | ì„¤ëª… |
|--------|---------|------|
| FastAPI ì…‹ì—… | `main.py` | í”„ë¡œì íŠ¸ ìƒì„± |
| LLM Service | `llm_service.py` | ì¶”ë¡  ë¡œì§ |
| Chat API | `chat.py` | SSE ìŠ¤íŠ¸ë¦¬ë° |
| Chat Controller | `ChatController.java` | Spring ì—°ë™ |

### Phase 8: ë¶€ê°€ ê¸°ëŠ¥ (Week 4-5)

| íƒœìŠ¤í¬ | íŒŒì¼/ëª¨ë“ˆ | ì„¤ëª… |
|--------|---------|------|
| Dividend Service | `DividendService.java` | ë°°ë‹¹ ê³„ì‚° |
| Notification | `NotificationService.java` | ì•Œë¦¼ ì‹œìŠ¤í…œ |
| Calc Controller | `CalcController.java` | ê³„ì‚°ê¸° API |
| Notification Controller | `NotificationController.java` | ì•Œë¦¼ API |

### Phase 9: í…ŒìŠ¤íŠ¸ ë° ìµœì í™” (Week 5)

| íƒœìŠ¤í¬ | íŒŒì¼/ëª¨ë“ˆ | ì„¤ëª… |
|--------|---------|------|
| í†µí•© í…ŒìŠ¤íŠ¸ | `*IntegrationTest.java` | ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ |
| ë¶€í•˜ í…ŒìŠ¤íŠ¸ | k6 ìŠ¤í¬ë¦½íŠ¸ | ì„±ëŠ¥ ê²€ì¦ |
| ìºì‹œ ìµœì í™” | Redis íŠœë‹ | ì„±ëŠ¥ ê°œì„  |
| API ë¬¸ì„œ | Swagger/OpenAPI | ë¬¸ì„œí™” |

### Phase 10: ë°°í¬ (Week 5)

| íƒœìŠ¤í¬ | íŒŒì¼/ëª¨ë“ˆ | ì„¤ëª… |
|--------|---------|------|
| Dockerfile | `Dockerfile` | ì´ë¯¸ì§€ ë¹Œë“œ |
| CI/CD | GitHub Actions | ìë™ ë°°í¬ |
| ëª¨ë‹ˆí„°ë§ | Prometheus/Grafana | ê´€ì¸¡ì„± |
| í”„ë¡œë•ì…˜ ë°°í¬ | AWS ECS/EC2 | ìµœì¢… ë°°í¬ |

---

## ğŸ“ ë¶€ë¡

### A. ì—ëŸ¬ ì½”ë“œ

> ì—ëŸ¬ ì‘ë‹µì€ `ErrorResponse` DTOë¥¼ í†µí•´ ì¼ê´€ëœ í˜•ì‹ìœ¼ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.
> 
> ```json
> {
>   "timestamp": "2026-01-17T12:00:00",
>   "status": 400,
>   "error": "TRADE_001",
>   "message": "ì”ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤."
> }
> ```

| ì½”ë“œ | ì„¤ëª… | HTTP ìƒíƒœ |
|------|------|----------|
| **ì¸ì¦ (AUTH)** |||
| AUTH_001 | í† í° ë§Œë£Œ | 401 |
| AUTH_002 | ìœ íš¨í•˜ì§€ ì•Šì€ í† í° | 401 |
| AUTH_003 | ê¶Œí•œ ì—†ìŒ | 403 |
| AUTH_004 | ì‚¬ìš©ì ì—†ìŒ | 404 |
| AUTH_005 | Google í† í° ê²€ì¦ ì‹¤íŒ¨ | 401 |
| AUTH_006 | ğŸ†• Kakao í† í° ê²€ì¦ ì‹¤íŒ¨ | 401 |
| AUTH_007 | ğŸ†• ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜ | 401 |
| AUTH_008 | ğŸ†• ì´ë©”ì¼ ì¤‘ë³µ (íšŒì›ê°€ì…) | 409 |
| **ê±°ë˜ (TRADE)** |||
| TRADE_001 | ì”ê³  ë¶€ì¡± | 400 |
| TRADE_002 | ë³´ìœ  ìˆ˜ëŸ‰ ë¶€ì¡± | 400 |
| TRADE_003 | ê±°ë˜ ì‹œê°„ ì™¸ | 400 |
| TRADE_004 | ìœ íš¨í•˜ì§€ ì•Šì€ ì¢…ëª© | 400 |
| **ê²Œì„ (GAME)** |||
| GAME_001 | ì½”ì¸ ë¶€ì¡± | 400 |
| GAME_002 | ì´ë¯¸ ë³´ìœ í•œ ì•„ì´í…œ | 409 |
| GAME_003 | ì•„ì´í…œ ì—†ìŒ | 404 |
| **ì‚¬ìš©ì (USER)** |||
| USER_001 | ì‚¬ìš©ì ì—†ìŒ | 404 |
| USER_002 | ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ì | 409 |
| **ì„œë²„ (SERVER)** |||
| SERVER_001 | ë‚´ë¶€ ì„œë²„ ì˜¤ë¥˜ | 500 |
| SERVER_002 | ì™¸ë¶€ API í˜¸ì¶œ ì‹¤íŒ¨ | 503 |
| **ê²€ì¦ (VALIDATION)** |||
| VALIDATION_ERROR | ì…ë ¥ê°’ ê²€ì¦ ì‹¤íŒ¨ | 400 |
| BIND_ERROR | ìš”ì²­ ë°ì´í„° ë°”ì¸ë”© ì‹¤íŒ¨ | 400 |

### B. ì˜ì¡´ì„± (build.gradle)

```groovy
plugins {
    id 'java'
    id 'org.springframework.boot' version '4.0.1'
    id 'io.spring.dependency-management' version '1.1.7'
}

dependencies {
    // Spring Boot Core
    implementation 'org.springframework.boot:spring-boot-starter-webmvc'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-data-redis'
    implementation 'org.springframework.boot:spring-boot-starter-security'
    implementation 'org.springframework.boot:spring-boot-starter-websocket'
    implementation 'org.springframework.boot:spring-boot-starter-validation'
    implementation 'org.springframework.boot:spring-boot-starter-flyway'
    implementation 'org.flywaydb:flyway-database-postgresql'
    
    // OAuth2 & JWT
    implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'
    implementation 'com.google.api-client:google-api-client:2.2.0'
    implementation 'io.jsonwebtoken:jjwt-api:0.12.5'
    runtimeOnly 'io.jsonwebtoken:jjwt-impl:0.12.5'
    runtimeOnly 'io.jsonwebtoken:jjwt-jackson:0.12.5'
    
    // Database
    runtimeOnly 'org.postgresql:postgresql'
    
    // Utility
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    
    // API Documentation & Monitoring
    implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.3.0'
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    
    // Testing
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'org.springframework.security:spring-security-test'
    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
}
```

### C. Dockerfile êµ¬ì„±

```dockerfile
# Multi-stage ë¹Œë“œ (ì´ë¯¸ì§€ ìµœì í™”)
FROM eclipse-temurin:21-jdk AS builder
# ... ë¹Œë“œ ë‹¨ê³„ ...

FROM eclipse-temurin:21-jre
# curl ì„¤ì¹˜ (HEALTHCHECKìš©)
RUN apt-get update && apt-get install -y --no-install-recommends curl

# ë¹„ë£¨íŠ¸ ì‚¬ìš©ì ìƒì„± (ë³´ì•ˆ)
RUN groupadd -r appgroup && useradd -r -g appgroup appuser
USER appuser

# í™˜ê²½ ë³€ìˆ˜
ENV JAVA_OPTS="-Xms512m -Xmx1024m"
ENV SPRING_PROFILES_ACTIVE="prod"
ENV TZ="Asia/Seoul"

# í—¬ìŠ¤ì²´í¬ (actuator ì‚¬ìš©)
HEALTHCHECK --interval=30s --timeout=3s --start-period=60s --retries=3 \
    CMD curl -f http://localhost:8080/actuator/health || exit 1
```

---

**ë¬¸ì„œ ë²„ì „:** 2.1 (ğŸ†• ì¹´ì¹´ì˜¤ OAuth, ì¼ë°˜ íšŒì›ê°€ì…/ë¡œê·¸ì¸ ì¶”ê°€)  
**ìµœì¢… ìˆ˜ì •ì¼:** 2026-01-17  
**ì‘ì„±ì:** MadCamp02 ê°œë°œíŒ€
